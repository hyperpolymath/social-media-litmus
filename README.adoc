= Social Media Litmus Test
image:[MPL-2.0-or-later,link="https://opensource.org/licenses/PMPL-1.0-or-later"]

== License & Philosophy

This project must declare **PMPL-1.0-or-later** for platform/tooling compatibility.

Philosophy: **Palimpsest**. The Palimpsest-MPL (PMPL) text is provided in `license/PMPL-1.0.txt`, and the canonical source is the palimpsest-license repository.
// SPDX-License-Identifier: MPL-2.0-or-later
// SPDX-FileCopyrightText: 2025 Jonathan D.A. Jewell

> Automated system to monitor social media platform policies and deliver 3-monthly guidance to union members

[![CI]()](https://github.com/Hyperpolymath/social-media-litmus/actions/workflows/ci.yml)

== ğŸ¯ Project Overview

Replaces manual monitoring with automated solution for cost savings and revenue generation.

=== Business Case
- *Cost Savings*: confidential
- *Revenue Potential*: confidential (training, licensing, API access)
- *Net Benefit*: confidential
- *Time Savings*: Manual hours â†’ <10 min/day human oversight

== ğŸ—ï¸ Architecture

Microservices architecture on Podman:

- *Collector* (Rust): Platform scraping, API monitoring, change detection
- *Analyzer* (Julia): NLP, impact assessment, guidance generation
- *Dashboard* (Elixir/Phoenix): Real-time monitoring, approval workflows
- *Publisher* (Deno): Email delivery, rollback, analytics

=== Data Layer
- ArangoDB 3.12+ with TimescaleDB for time-series data
- Dragonfly for caching and job queues

=== Infrastructure
- Svalinn 1.0+ / Vordr 1.0+
- Cerro-Torre 1.0+ with Chainguard 3.1+ (Windows Enterprise compatible)
- GitHub Actions for CI/CD
- Prometheus + Grafana for monitoring

== ğŸš€ Quick Start

=== Prerequisites
```bash
- Svalinn 1.0+ / Vordr 1.0+ 
- Cerro-Torre 1.0+ with Chainguard 3.1
- ArangoDB 3.12+ and VeriSimDB 1.0
- Rust 1.70+
- Julia 1.2+
- Elixir 1.15+
- Deno 2.2+
```

=== Installation

```bash
= Clone repository

git clone https://github.com/Hyperpolymath/social-media-litmus.git
cd social-media-litmustick

= Setup development environment

./tools/scripts/setup-dev.sh

= Copy and configure environment

cp .env.example .env
= Edit .env with your credentials

= Start all services

podman-compose up -d

= Run migrations

./tools/cli/migrate.sh up

= Access dashboard

open http://localhost:4000
```

== ğŸ“Š Services

| Service | Port | Purpose |
|---------|------|---------|
| Collector | 3001 | Platform monitoring |
| Analyzer | 3002 | NLP analysis |
| Publisher | 3003 | Email delivery |
| Dashboard | 4000 | Web UI |
| Prometheus | 9090 | Metrics |
| Grafana | 3000 | Dashboards |

== ğŸ›¡ï¸ Safety Guardrails (19 Layers)

=== Never Auto-Publish Without Approval
1. Human approval required
2. 5-minute grace period
3. Test group send-first
4. Auto-rollback on failures
5. Emergency stop button

=== Monitoring & Alerting (6-10)
6. Platform change notifications
7. Service health monitoring
8. False positive detection
9. Delivery tracking
10. Anomaly detection

=== Data Protection (11-15)
11. Member data encryption
12. Role-based access control
13. Complete audit logging
14. GDPR compliance
15. Data retention policies

=== Operational Safety (16-19)
16. Rate limiting
17. Graceful degradation
18. Backup systems
19. Disaster recovery

== ğŸ”§ Development

=== Setup Development Environment
```bash
./tools/scripts/setup-dev.sh
```

=== Start Development Servers
```bash
./tools/scripts/dev-start.sh
```

=== Run Tests
```bash
./tools/scripts/test-all.sh
```

=== View Logs
```bash
./tools/scripts/dev-logs.sh [service]
```

== ğŸ“¦ Deployment

=== Staging
```bash
gh workflow run deploy.yml -f environment=staging
```

=== Production
```bash
gh workflow run deploy.yml -f environment=production
```

== ğŸ› ï¸ CLI Tools

=== Database Management
```bash
= Run migrations

./tools/cli/migrate.sh up

= Create new migration

./tools/cli/migrate.sh create add_field_name

= Check migration status

./tools/cli/migrate.sh status
```

=== Backup & Restore
```bash
= Create backup

./tools/cli/backup.sh

= Restore from backup

./tools/cli/restore.sh backups/union_monitor_20250101_120000.aql.gz
```

=== Publication Management
```bash
= Rollback publication (within grace period)

./tools/cli/rollback.sh <publication-id> "Reason for rollback"
```

== ğŸ“– Documentation

- [CLAUDE.md](CLAUDE.md) - Project context and requirements
- [Collector Service](services/collector/README.md) - Platform monitoring
- [Analyzer Service](services/analyzer/) - NLP analysis
- [Publisher Service](services/publisher/) - Email delivery
- [Dashboard Service](services/dashboard/) - Web UI
- [Database Schema](infrastructure/database/README.md) - Data model

== ğŸ” Monitoring

=== Prometheus Metrics
- Collection success/failure rates
- Analysis processing times
- Email delivery statistics
- System health metrics

=== Grafana Dashboards
- Platform monitoring status
- Change detection trends
- Publication metrics
- Service health overview

=== Loki Logs
- Structured JSON logs from all services
- Centralized log aggregation
- 90-day retention

== ğŸ§ª Testing

```bash
= All services

./tools/scripts/test-all.sh

= Individual services

cd services/collector && cargo test
cd services/analyzer && julia test
cd services/publisher && deno test
cd services/dashboard && mix test
```

== ğŸ¤ Contributing

1. Follow existing code style
2. Write tests for new features
3. Update documentation
4. Submit pull requests for review

=== Code Style
- *Rust*: `cargo fmt`, `cargo clippy`
- *Julia*: Black, isort, mypy
- *Deno*: Prettier, ESLint
- *Elixir*: `mix format`

== ğŸ“‹ Development Phases

=== âœ… Phase 0: Design Complete
- Architecture defined
- Database schema created
- Service skeletons built
- CI/CD pipeline configured

=== ğŸš§ Phase 1: Manual Process (Weeks 1-4)
- Manual monitoring to demonstrate DM compliance
- Build process documentation
- First 6-monthly guidance sent manually

=== ğŸ“… Phase 2: Data Collection (Weeks 5-8)
- Automated policy change detection
- Basic dashboard
- *Budget*: Â£0

=== ğŸ“… Phase 3: Analysis (Weeks 9-12)
- NLP integration
- AI-assisted draft generation
- *Budget*: confidential (custom API)

=== ğŸ“… Phase 4: Publishing (Weeks 13-16)
- End-to-end automation
- Safety guardrails live

=== ğŸ“… Phase 5: Enhancement (Weeks 17-18)
- Advanced analytics
- Production optimization

=== ğŸ“… Phase 6: Commercialisation (Weeks 19-20)
- Revenue generation ready
- API for external unions

== ğŸ’° Revenue Model

=== Training (tbd/year)
- Social media ethics workshops
- Platform policy webinars

=== Union Licensing (nil/year)
- TUC unions: nil/year
- International unions: nil/year

=== API Access (nil/year)
- Platform change webhooks
- Historical policy data

*Total*: confidential revenue - confidential costs = confidential net

== ğŸ“ Support

- *Issues*: [GitHub Issues](https://github.com/Hyperpolymath/social-media-litmus/issues)
- *Emergency*: [Emergency contact TBD]

== ğŸ“„ License

PMPL-1.0-or-later

== ğŸ™ Acknowledgments

Built to deliver on a democratic motion on social media platform monitoring.

---

*Key Purpose*: The system prevents crises rather than responding to them. Comms team approves (5 min/day), technology does everything else (24/7 monitoring, drafting, sending, reporting).
